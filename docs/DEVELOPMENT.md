# Development Guide

This guide explains how to use the code formatters and linters in this project.

## Prerequisites

Install the required formatters and linters:

```bash
pip install yamlfmt nginxfmt ruff
```

## Formatters

### YAML Formatting (yamlfmt)

Format YAML files:

```bash
yamlfmt -w .github/workflows/*.yaml docker-compose.yaml
```

Configuration is defined in `.yamlfmt` file (auto-generated by CI).

### Nginx Configuration Formatting (nginxfmt)

Format Nginx configuration:

```bash
nginxfmt -i 4 config/nginx.conf
```

### Python Formatting (Ruff)

Format Python files in the addons directory:

```bash
# Format code
find addons -type f -name '*.py' -exec ruff format {} +

# Fix linting issues
find addons -type f -name '*.py' -exec ruff check --fix {} +

# Check for issues without fixing
find addons -type f -name '*.py' -exec ruff check {} +
```

Configuration is in `pyproject.toml` with Odoo-compatible rules.

## CI/CD Pipeline

The GitHub Actions workflow (`.github/workflows/quality-checks.yaml`) automatically:

1. **Auto-formats** YAML, Nginx, and Python files on pull requests
2. **Lints** YAML and Python files
3. **Validates** Docker Compose and Nginx configurations

All formatting is done with `continue-on-error: true` to avoid blocking PRs.

## Ruff Configuration

The project uses Ruff for Python linting and formatting with Odoo-specific rules:

- Line length: 88 characters
- Ignores Odoo naming conventions (mixedCase methods)
- Allows UTF-8 encoding declarations (required by Odoo)
- Auto-fixes import sorting and common issues

See `pyproject.toml` for full configuration.
